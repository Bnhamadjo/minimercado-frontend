<h2 class="titulo-form">ðŸ“¦ Cadastro de Produto</h2>
<hr class="divisor" />

<form (ngSubmit)="salvarProduto()" #produtoForm="ngForm" class="formulario-produto" autocomplete="off">
  <mat-form-field appearance="outline" class="campo">
    <mat-label>Nome</mat-label>
    <input matInput type="text" name="nome" [(ngModel)]="produto.nome" required />
  </mat-form-field>

  <mat-form-field appearance="outline" class="campo">
    <mat-label>CÃ³digo / QR</mat-label>
    <input matInput type="text" name="codigo_barras" [(ngModel)]="produto.codigo_barras" required />
  </mat-form-field>

  <div class="scanner-container">
    <mat-form-field appearance="outline" class="campo">
      <mat-label>Selecionar CÃ¢mera</mat-label>
      <mat-select [(value)]="selectedDevice">
        <mat-option *ngFor="let device of availableDevices" [value]="device">
          {{ device.label || 'CÃ¢mera ' + device.deviceId }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <zxing-scanner
      [formats]="formats"
      [device]="selectedDevice"
      [autostart]="true"
      (scanSuccess)="onCodeResult($event)"
      (permissionResponse)="onPermissionResponse($event)">
    </zxing-scanner>
  </div>

  <mat-form-field appearance="outline" class="campo">
    <mat-label>PreÃ§o (FCFA)</mat-label>
    <input matInput type="number" name="preco" [(ngModel)]="produto.preco" required />
  </mat-form-field>

  <mat-form-field appearance="outline" class="campo">
    <mat-label>Quantidade</mat-label>
    <input matInput type="number" name="quantidade" [(ngModel)]="produto.quantidade" required />
  </mat-form-field>

  <mat-form-field appearance="outline" class="campo">
    <mat-label>Categoria</mat-label>
    <mat-select name="categoria_id" [(ngModel)]="produto.categoria_id" required>
      <mat-option *ngFor="let cat of categorias" [value]="cat.id">{{ cat.nome }}</mat-option>
    </mat-select>
  </mat-form-field>

  <mat-form-field appearance="outline" class="campo">
    <mat-label>Fornecedor</mat-label>
    <mat-select name="fornecedor_id" [(ngModel)]="produto.fornecedor_id">
      <mat-option *ngFor="let f of fornecedores" [value]="f.id">{{ f.nome }}</mat-option>
    </mat-select>
  </mat-form-field>

  <div class="botoes">
    <button mat-raised-button color="primary" type="submit">ðŸ’¾ Salvar</button>
    <button mat-button type="reset">ðŸ§¹ Limpar</button>
  </div>
</form>
